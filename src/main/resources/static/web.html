<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Match Display (WebSocket)</title>
</head>
<body>
<div id="main-content" class="container">
    <div class="row">
        <div class="col-md-6">
            <form id="connectForm" class="form-inline">
                <div class="form-group">
                    <label for="connectBtn">WebSocket connection:</label>
                    <button id="connectBtn" class="btn btn-default" type="button">Connect</button>
                </div>
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-md-6">
            <form id="addMatchForm" class="form-inline">
                <div class="form-group">
                    <label for="date">Date du match</label>
                    <input type="date" id="date" class="form-control" placeholder="Qu'elle est la date du match :">
                </div>
                <div class="form-group">
                    <label for="team1">Nom de l'equipe 1</label>
                    <input type="text" id="team1" class="form-control" placeholder="Quel est le nom de l'equipe 1 :">
                </div>
                <div class="form-group">
                    <label for="team2">Nom de l'equipe 2</label>
                    <input type="text" id="team2" class="form-control" placeholder="Quel est le nom de l'equipe 2 :">
                </div>
                <div class="form-group">
                    <label for="score1">Score de l'equipe 1</label>
                    <input type="text" id="score1" class="form-control" placeholder="Quel est le score de l'equipe 1 :">
                </div>
                <div class="form-group">
                    <label for="score2">Score de l'equipe 2</label>
                    <input type="text" id="score2" class="form-control" placeholder="Quel est le score de l'equipe 2 :">
                </div>
                <div class="form-group">
                    <label for="termine">Match termine</label>
                    <input type="checkbox" id="termine" class="form-control"
                           placeholder="Est ce que le match est termine :">
                </div>
                <div class="form-group">
                    <label for="image">Image du match</label>
                    <input type="text" id="image" class="form-control" placeholder="Donne un lien d'une image :">
                </div>

                <button id="addMatchBtn" class="btn btn-default" type="button">Ajouter un resultat</button>
            </form>
        </div>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/sockjs/latest/sockjs.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
<script>
    let stompClient;

    function connect() {
        stompClient = Stomp.over(new SockJS("/ws/websocket"));
        stompClient.connect({}, function (frame) {
            console.log('Connected: ' + frame);
            stompClient.subscribe('/topic/addMatches', function (addMatch) {
                console.log('Received: ' + addMatch.body);
            });
        });
    }

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById("connectBtn").addEventListener("click", connect);
        document.getElementById("addMatchBtn").addEventListener("click", addMatch);
    });

    function addMatch() {
        let date = document.getElementById("date")
        let team1 = document.getElementById("team1").value;
        let team2 = document.getElementById("team2").value;
        let score1 = document.getElementById("score1").value;
        let score2 = document.getElementById("score2").value;
        let termine = document.getElementById("termine").checked;
        let image = document.getElementById("image").value;

        let matches = {
            date: date,
            team1: team1,
            team2: team2,
            score1: score1,
            score2: score2,
            termine: termine,
            image: image
        };

        stompClient.send("/ws/matchesweb", {}, JSON.stringify(matches));
    }
</script>
</body>
</html>